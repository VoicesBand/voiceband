<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Voices - STL's Premier Classic Band</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #video-grid iframe {
      width: 100%;
      max-width: 560px;
      height: 315px;
      margin-bottom: 16px;
    }
    .logo img {
      max-height: 60px;
      max-width: 200px;
    }
  </style>
</head>
<body>

  <div class="logo">
    <img id="logo-img" src="images/logoGTO.jpg" alt="Voices Logo" />
  </div>

  <nav class="nav-bar">
    <button onclick="scrollToSection('about')">about</button>
    <button onclick="scrollToSection('shows')">shows</button>
    <button onclick="scrollToSection('gallery')">gallery</button>
    <button onclick="scrollToSection('booking')">booking</button>
    <a href="admin.html" class="admin-link">Admin</a>
  </nav>

  <header class="hero">
    <img src="images/banner.jpg" alt="Voices Band Banner" />
  </header>

  <section id="about">
    <h2>ðŸŽ¤ Voices</h2>
    <p id="about-text">
      Formerly known as GTO (Good Time Oldies), Voices is a seasoned 4-piece band
      performing around the STL Metro area...
    </p>
  </section>

  <section id="shows">
    <h2>Upcoming Shows</h2>
    <div id="upcoming-shows">Default upcoming shows info here...</div>
  </section>

  <section id="gallery">
    <h2>Media Gallery</h2>
    <div class="video-grid" id="video-grid"></div>
    <a href="https://www.youtube.com/@VoicesSTL" target="_blank" class="btn">More Videos</a>
  </section>

  <section id="booking">
    <h2>Book Voices</h2>
    <iframe 
      src="https://docs.google.com/forms/d/e/1FAIpQLSc8YrV1tr8IuUDKh98gRG5KXC6PyoiE2G7D2zBodrSwv-_w_g/viewform?usp=sharing&ouid=108029081950798897332" 
      width="100%" height="800" frameborder="0">Loadingâ€¦</iframe>
  </section>

  <script>
  async function loadContent() {
    try {
      const res = await fetch('content.json');
      if (!res.ok) throw new Error('Failed to load content.json');
      const data = await res.json();

      // Update About Text
      const aboutTextElem = document.getElementById('about-text');
      aboutTextElem.textContent = data.aboutText || '';

      // Update Shows
      const upcomingShowsElem = document.getElementById('upcoming-shows');
      upcomingShowsElem.innerHTML = (data.showsList || '').replace(/\n/g, '<br>');

      // Update Logo
      const logoImg = document.getElementById('logo-img');
      logoImg.src = data.logoURL || 'images/logoGTO.jpg';

      // Update Videos
      const videoGrid = document.getElementById('video-grid');
      videoGrid.innerHTML = '';
      (data.videoUrls || []).forEach(url => {
        const iframe = document.createElement('iframe');
        iframe.src = url;
        iframe.allowFullscreen = true;
        iframe.setAttribute('frameborder', '0');
        videoGrid.appendChild(iframe);
      });
    } catch (err) {
      console.error('Error loading content:', err);
    }
  }

  loadContent();

  function scrollToSection(sectionId) {
    const section = document.getElementById(sectionId.toLowerCase());
    if (section) section.scrollIntoView({ behavior: 'smooth' });
  }
</script>

    const channel = new BroadcastChannel('site-updates');
    channel.onmessage = (event) => {
      if (event.data === 'refresh') {
        location.reload();
      }
    };
  </script>

</body>
</html>
