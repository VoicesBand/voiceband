<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Voices - STL's Premier Classic Band</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #video-grid iframe {
      width: 100%;
      max-width: 560px;
      height: 315px;
      margin-bottom: 16px;
    }
    .logo img {
      max-height: 60px;
      max-width: 200px;
    }
  </style>
</head>
<body>

  <div class="logo">
    <img id="logo-img" src="images/logoGTO.jpg" alt="Voices Logo" />
  </div>

  <nav class="nav-bar">
    <button onclick="scrollToSection('about')">about</button>
    <button onclick="scrollToSection('shows')">shows</button>
    <button onclick="scrollToSection('gallery')">gallery</button>
    <button onclick="scrollToSection('booking')">booking</button>
    <a href="admin.html" class="admin-link">Admin</a>
  </nav>

  <header class="hero">
    <img src="images/banner.jpg" alt="Voices Band Banner" />
  </header>

  <section id="about">
    <h2>ðŸŽ¤ Voices</h2>
    <p id="about-text">
      Formerly known as GTO (Good Time Oldies), Voices is a seasoned 4-piece band
      performing around the STL Metro area...
    </p>
  </section>

  <section id="shows">
    <h2>Upcoming Shows</h2>
    <div id="upcoming-shows">Default upcoming shows info here...</div>
  </section>

  <section id="gallery">
    <h2>Media Gallery</h2>
    <div class="video-grid" id="video-grid"></div>
    <a href="https://www.youtube.com/@VoicesSTL" target="_blank" class="btn">More Videos</a>
  </section>

  <section id="booking">
    <h2>Book Voices</h2>
    <iframe 
      src="https://docs.google.com/forms/d/e/1FAIpQLSc8YrV1tr8IuUDKh98gRG5KXC6PyoiE2G7D2zBodrSwv-_w_g/viewform?usp=sharing&ouid=108029081950798897332" 
      width="100%" height="800" frameborder="0">Loadingâ€¦</iframe>
  </section>

  <script>
    const logoImg = document.getElementById('logo-img');
    const storedLogoUrl = localStorage.getItem('logoURL');
    if (storedLogoUrl && storedLogoUrl.trim() !== '') {
      logoImg.src = storedLogoUrl;
    }

    const aboutTextElem = document.getElementById('about-text');
    const storedAbout = localStorage.getItem('aboutText');
    if (storedAbout && storedAbout.trim() !== '') {
      aboutTextElem.textContent = storedAbout;
    }

    const upcomingShowsElem = document.getElementById('upcoming-shows');
    const storedShows = localStorage.getItem('showsList');
    if (storedShows && storedShows.trim() !== '') {
      upcomingShowsElem.innerHTML = storedShows.replace(/\n/g, '<br>');
    }

    const defaultVideos = [
      "https://www.youtube.com/embed/ycCKV5uYKSE",
      "https://www.youtube.com/embed/O-PhaZvzlYw"
    ];
    const videoUrls = JSON.parse(localStorage.getItem('videoUrls')) || defaultVideos;

    const videoGrid = document.getElementById('video-grid');
    videoGrid.innerHTML = '';
    videoUrls.forEach(url => {
      const iframe = document.createElement('iframe');
      iframe.src = url;
      iframe.allowFullscreen = true;
      iframe.setAttribute('frameborder', '0');
      videoGrid.appendChild(iframe);
    });

    function scrollToSection(sectionId) {
      const section = document.getElementById(sectionId.toLowerCase());
      if (section) {
        section.scrollIntoView({ behavior: 'smooth' });
      }
    }

    // Listen for updates from other tabs
window.addEventListener('storage', (e) => {
  if (e.key === 'lastUpdate') {
    location.reload();
  }
});

    const channel = new BroadcastChannel('site-updates');
    channel.onmessage = (event) => {
      if (event.data === 'refresh') {
        location.reload();
      }
    };
  </script>

</body>
</html>
